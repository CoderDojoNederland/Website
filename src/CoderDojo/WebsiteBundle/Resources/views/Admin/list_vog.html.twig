{% extends "CoderDojoWebsiteBundle::index.html.twig" %}

{% block title %}Administratie &mdash; {{ parent() }}{% endblock %}
{% block fbtitle %}Administratie &mdash; {{ parent() }}{% endblock %}

{% block content %}
    <!--=== Breadcrumbs ===-->
    <div class="breadcrumbs margin-bottom-40">
        <div class="container">
            <h1 class="pull-left">VOG Beheren</h1>
        </div><!--/container-->
    </div><!--/breadcrumbs-->
    <!--=== End Breadcrumbs ===-->
<div class="container">
    <div class="row">
        <div class="col-md-12">
            {% for flashMessage in app.session.flashbag.get('success') %}
                <div class="alert alert-success">
                    <button type="button" class="close" data-dismiss="alert">×</button>
                    {{ flashMessage }}
                </div>
            {% endfor %}
            {% for flashMessage in app.session.flashbag.get('error') %}
                <div class="alert alert-danger">
                    <button type="button" class="close" data-dismiss="alert">×</button>
                    {{ flashMessage }}
                </div>
            {% endfor %}
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th width="130">Dojo</th>
                        <th>Aanvrager</th>
                        <th>Voorletters</th>
                        <th>Achternaam</th>
                        <th>Geboortedatum</th>
                        <th>Email</th>
                        <th>Opmerkingen</th>
                        <th width="130">Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for coc in cocs %}
                    <tr>
                        <td>{{ coc.requestedFor.name }}</td>
                        <td>{{ coc.requestedBy.firstName }} {{ coc.requestedBy.lastName }}</td>
                        <td>{{ coc.letters }}</td>
                        <td>{{ coc.name }}</td>
                        <td>{{ coc.birthdate|date('d/m/Y') }}</td>
                        <td>{{ coc.email }}</td>
                        <td>{{ coc.notes }}</td>
                        <td>
                            {% if coc.status == constant('CoderDojo\\WebsiteBundle\\Entity\\CocRequest::STATUS_CREATED') %}
                                <p class="text-muted">
                                    <span class="label label-default"><i class="icon-asterisk"></i></span>
                                    <strong>Aangemaakt</strong>
                                </p>
                            {% elseif coc.status == constant('CoderDojo\\WebsiteBundle\\Entity\\CocRequest::STATUS_PREPARED') %}
                                <p class="text-warning">
                                    <span class="label label-warning"><i class="icon-flag"></i></span>
                                    <strong>Voorbereid</strong>
                                </p>
                            {% elseif coc.status == constant('CoderDojo\\WebsiteBundle\\Entity\\CocRequest::STATUS_REQUESTED') %}
                                <p class="text-info">
                                    <span class="label label-info"><i class="icon-envelope"></i></span>
                                    <strong>Aangevraagd</strong>
                                </p>
                            {% elseif coc.status == constant('CoderDojo\\WebsiteBundle\\Entity\\CocRequest::STATUS_RECEIVED') %}
                                <p class="text-success">
                                    <span class="label label-success"><i class="icon-ok"></i></span>
                                    <strong>Ontvangen</strong>
                                </p>
                            {% endif %}
                        </td>
                        <td>
                            {% if coc.status == constant('CoderDojo\\WebsiteBundle\\Entity\\CocRequest::STATUS_CREATED') %}
                                {% set created_label = 'warning' %}
                                {% set created_status = '' %}
                            {% else %}
                                {% set created_label = 'default' %}
                                {% set created_status = 'disabled' %}
                            {% endif %}

                            {% if coc.status == constant('CoderDojo\\WebsiteBundle\\Entity\\CocRequest::STATUS_PREPARED') %}
                                {% set prepared_label = 'info' %}
                                {% set prepared_status = '' %}
                            {% else %}
                                {% set prepared_label = 'default' %}
                                {% set prepared_status = 'disabled' %}
                            {% endif %}

                            {% if coc.status == constant('CoderDojo\\WebsiteBundle\\Entity\\CocRequest::STATUS_REQUESTED') %}
                                {% set requested_label = 'success' %}
                                {% set requested_status = '' %}
                            {% else %}
                                {% set requested_label = 'default' %}
                                {% set requested_status = 'disabled' %}
                            {% endif %}

                            {% if coc.status != constant('CoderDojo\\WebsiteBundle\\Entity\\CocRequest::STATUS_RECEIVED') %}
                                <a href="{{ path('admin-vog-prepared', {'id': coc.id}) }}"
                                   class="btn btn-xs btn-{{ created_label }} {{ created_status }}"
                                >
                                    <i class="icon-flag"></i>
                                </a>
                                <a href="{{ path('vog-requested', {'id': coc.id}) }}" class="btn btn-xs btn-{{ prepared_label }} {{ prepared_status }}">
                                    <i class="icon-envelope"></i>
                                </a>
                                <a href="{{ path('admin-vog-received', {'id':coc.id}) }}" class="btn btn-xs btn-{{ requested_label }} {{ requested_status }}">
                                    <i class="icon-ok"></i>
                                </a>
                            {% else %}
                                <span class="label label-success">Voltooid</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
