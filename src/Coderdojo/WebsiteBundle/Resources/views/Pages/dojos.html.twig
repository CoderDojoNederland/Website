{% extends "CoderdojoWebsiteBundle::index.html.twig" %}

{% block customjs %}
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js"></script>

  <script>
    window.dojos = {};
    {% for dojo in dojos %}
      dojos[{{dojo.id}}] = {
        id:           {{dojo.id}},
        name:         "{{dojo.name}}",
        location:     "{{dojo.location}}",
        street:       "{{dojo.street}}",
        housenumber:  "{{dojo.housenumber}}",
        postalcode:   "{{dojo.postalcode}}",
        city:         "{{dojo.city}}",
        slug:         "{{dojo.slug}}",
        facebook:     "{{dojo.facebook}}",
        twitter:      "{{dojo.twitter}}",
        website:      "{{dojo.website}}",
        geo: {
          lat: {{dojo.lat}},
          long: {{dojo.long}}
        }
      }
    {% endfor %}
  </script>

  <script type="text/javascript" src="{{asset('bundles/coderdojowebsite/js/pages/dojos.js')}}"></script>
{% endblock customjs %}

{% block content %}

<div class="content-wrapper">

  <div id="all-dojos-map" class="map">
  </div>

  <div class="container">


    <div class="row margin-bottom-30 dojo-selector">
        <div class="col-md-6">
            <!--Orange Panels-->
            <div class="panel panel-orange">

                <div class="panel-heading">
                  <ul class="nav nav-tabs">
                    <li role="presentation" class="active" data-tab-ref="upcoming-dojos"><a href="#"><i class="icon-calendar"></i>&nbsp;&nbsp;Komende dojo&apos;s</a></li>
                    <li role="presentation" data-tab-ref="all-dojos"><a href="#"><i class="icon-list"></i>&nbsp;&nbsp;Alle Dojo&apos;s</a></li>
                  </ul>
                </div>

                <div class="panel-body" data-js-ref="list-upcoming-dojos">

                  <!-- header row -->
                  <div class="row dojos-header">
                    <div class="col-md-12">
                      <div class="row">
                        <div class="col-md-4">
                          <b>Naam</b>
                        </div>
                        <div class="col-md-4">
                          <b>Datum</b>
                        </div>
                        <div class="col-md-4">
                          <b>Tickets</b>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- various dojo rows -->
                  {% if nextdojos|length > 0 %}
                      {% for dojo in nextdojos %}
                      <div class="row dojo-row" data-dojo-id="{{dojo.dojo.id}}">
                        <div class="col-md-12">
                          <div class="row">
                            <div class="col-md-4">
                              <strong>{{dojo.dojo.name|replace({'CoderDojo ':''})}}</strong><br />{{dojo.name}}
                            </div>
                            <div class="col-md-4">
                              {{ dojo.dojodate|localizeddate('none', 'none', 'nl_NL', null, "d MMMM Y")}}
                            </div>
                            <div class="col-md-4">
                              <a href="{{ dojo.url }}" target="_blank" class="btn-u btn-u-small btn-u-green">Reserveer</a>
                            </div>
                          </div>
                        </div>
                      </div>
                      {% endfor %}
                  {% else %}
                  <div class="row">
                    <div class="col-md-12">
                      <p class="empty">
                        Er zijn momenteel geen edities gepland
                      </p>
                    </div>
                  </div>
                  {% endif %}



                </div>

                <div class="panel-body hidden" data-js-ref="list-all-dojos">
                  <!-- header row -->
                  <div class="row dojos-header">
                    <div class="col-md-12">
                      <div class="row">
                        <div class="col-md-5">
                          <b>Naam</b>
                        </div>
                        <div class="col-md-7">
                          <b>Contact</b>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- various dojo rows -->
                  {% for dojo in dojos %}
                  <div class="row dojo-row" data-dojo-id="{{dojo.id}}" class="dojo-row">
                    <div class="col-md-12">
                      <div class="row">
                        <!-- general dojo information -->
                        <div class="col-md-5">
                          <strong>{{dojo.name}}</strong><br />
                          {{dojo.location}}<br />
                          {{dojo.street}} {{dojo.housenumber}}<br />
                          {{dojo.postalcode}} {{dojo.city}}
                        </div>

                        <!-- dojos contact buttons -->
                        <div class="col-md-7">
                          <div class="row">
                            <div class="col-md-12">
                              <div class="row">
                                <div class="col-md-6">
                                  <p class="contact-info">
                                    <a href="mailto:{{ dojo.email }}" class="btn-u btn-u-blue btn-block"><i class="icon-envelope"></i>&nbsp;&nbsp;Email</a><br/>
                                    <a href="{{ dojo.website }}" class="btn-u btn-u-blue btn-block"><i class="icon-globe"></i>&nbsp;&nbsp;Website</a>
                                  </p>
                                </div>
                                <div class="col-md-6">
                                  <p class="contact-info">
                                    <a href="http://twitter.com/{{ dojo.twitter }}" class="btn-u btn-u-blue btn-block"><i class="icon-twitter"></i>&nbsp;&nbsp;Twitter</a><br/>
                                    <a href="{{ dojo.facebook }}" class="btn-u btn-u-blue btn-block"><i class="icon-facebook"></i>&nbsp;&nbsp;Facebook</a>
                                  </p>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>
                  {% endfor %}

                </div>

            </div>
            <!--End Orange Panels-->
        </div>
      </div>
    </div>
</div>

{% endblock %}

{% block description %}
In heel Nederland worden er CoderDojo's gehouden. Kijk hier waar er een bij jou in de buurt is!
{% endblock %}

{% block fbdescription %}
In heel Nederland worden er CoderDojo's gehouden. Kijk hier waar er een bij jou in de buurt is!
{% endblock %}
